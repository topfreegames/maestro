language: go
go:
- 1.12.9
services:
- docker
cache:
  directories:
  - "$GOPATH/pkg"
sudo: true
install:
- wget -q ${HELM_URL}/${HELM_TGZ}
- tar xzfv ${HELM_TGZ}
- PATH=`pwd`/linux-amd64/:$PATH
- helm init --client-only
- sudo apt-get install python-pip
- sudo -H pip install s3cmd
- make setup-ci
script:
- make test-ci
after_success:
- bash after-success.sh
- bash create-helm-chart.sh
- /bin/bash -c '[ "$TRAVIS_TAG" ] && curl -H POST "$JENKINS_URL&version=$TRAVIS_TAG"'
env:
  global:
  - S3CMD_ZIP=master.zip
  - S3CMD_URL=https://github.com/s3tools/s3cmd/archive
  - HELM_URL=https://storage.googleapis.com/kubernetes-helm
  - HELM_TGZ=helm-v2.4.1-linux-amd64.tar.gz
  - secure: DgyQ0pT+P+aMj3iCshPiHmG7sDx95QVC3Qq+ITD2769dz1Sep6Bvz99emLM84b5g1V3aT7hvjg+RE/A8yrpCHZfuiNeiNY5XQR58zaKcShoRmYxyuSJPLUxbu12AVrbaQJFbwEs5evc2BDHBAN1+YTaEGIkAeEfAjyw4DpxZZNm8NHB5JHSKuZmcdoPz7ASdysenLzWxon/fxRB5nXVK2Jky/+0uFhMpJPJhvpQBE0SLrZ6L9mSduIehcrnl/qvJnVIWZDkMb1qRgSDZ3rXSFk05T1bZtbeQXQRWcz2AtHfvmhR51ufsfI7tZ/n65U/J40hq8OcSLjJyA4GOy0Xt7Vai0pjOyv5XBvwyCqTcl1ptm3Yf5aW75kiCsMlBGXv8dK8vI7IY4iXLPnipSKVK1UkgCfSQNRsHlf0vJ21k/7KRAZnhmtS39WcVapOed/UoXIWDgMH5PcrnkuZPylLONlHSE5pbevnObHsRGh86YSAxx0RS+RXJ2qlF6l8QYT5S0TDDHtpJ9qlJHpD6jJCMm9/0txTBgMDfaksmFLVnEEKhZrWW/lDk8YCDNz+Sb2Pq1cBRXzi2+i10b21XS4pYBbxyNecanwxNtr8Bia7yQbJHZF1zByUz4IaMA1pX7B2XGA46gDpav6edKWtN9es/HBxH8FgH7EG1dECjGBNXlw8=
  - secure: No6skbtjA8gQKB/Z6cOAgyPMIJ4yt++yCo0JRQxEeKHP4sTK8gdZ2Xpt0Lk6XXQcBfpz2IG06hsfGkMznnKIdcCh2IT1Y4Iwj7U2k5fAgRoWxGWNi9EGms08fRaW6DEHxAEI1dqpw8GSpDZsiHM4ZlM32QYu25/v1lVDOSCwbGmKq85FctIlxpuiUdZwrM4FY9AzI3x5tcYMUGiVsVdl+kEVcphImurLuzxDSBXH1/tb5dRYDv4Qo6bfnj5kIWDNPpEH1sK8jddjQ46BP13Ad9KAhNPcIvx6oerMvHiZ9VKFzYuo0fety9Ax/jxZdppNSvs3PtbM9slR1qKOlOSyYS00nTH5j+xvhygurJ9ffcmbZFqeFLI7rEHcT8BYGGZgK6Hb4nbuqp6julWndfpcjqntxCThKp5/z74aZn1jPshVh+0Zud48ne9kHpAqwReW8MsKVPAObzGIUcZypdQt6TYb4AvJtvea81Z9KB2jleBDOC7YggbMGKE/5PjfQREry39ba6WVCOv0b4tgDjAdlIP2/XPJ34CS69YF5dC8dVAegJ+PzTNEwPwXbGywRxuU9SoXHS+V6YswcEhRvNYgpL3vmzj6tmM3oOOg/fX0vtWddguN8romoGHCJbYnNjEMvP10x6tcZSBxz5DzxWhGfBnnpNxtqmvfm0aKw7azbD0=
  - secure: G8sM4Xqxuj27/MlmKPJq2REfogZh3aDgOWoY3nJ8bd6hQHmdisnRYCyC9t5PDkBJMZKTA0YYO4WossrTAoYrHXUN4iB1Kq/np8xM5N22D85LG3t2asMw9ft8fHAtrC5IHN3UFxFU1w3o/2zKGjpskPHvBKcIKeNG+QgQrxwPjYCyNj7ELfXvqesoocD8C7pkLgZw3jVOo/hpp2L9wVaniKIYKKO4ecYuIomlZUntorx98hD+ZmV7bkW5zQYvvPBhZOGB/KYJb58tkavGE4fFp6sgmhiC96BLRd9SLmye6tLTeT0HOHg7A7Hg8XHWz1U19TL+B0desrt65o06FyunN3DB+eJXQEVYujfP0x/n9LEucf1U6Cb/idgA73ZvHapthkLeG14yXqL/8r/kYqwS8Q9pNMmykZjhY81KmpQyKuOM1uyxD5K/avh2yi/KtvU1WEjWudJOWDw8AoLGUpnFd0c+nQQBMhX3GG9B3jGLqzIjX1Fe1sYELAgQYQgumyosNf1GBG3IaLbmeQ8I+qdZt0+QmLLIZl2KmG2vuQmDDFDIYTnLg/0KEzUsjfNoG+fl4qZfHnNme5ZpkY5FlgNTnIQ8HharrTYFMaj33l3MCn7cNZKLTKIPOtzLsjdbIHmSjiSHd5w/At2iil7tUjpPvisr2oRFDywEXsG98EkXUN0=
  - secure: RqM2jIU8eKMX+nuYZqtGZ14ihYZhlkUL7PknkIlBZGfgvpfSOg7Zv9OCUAimkEhwnMRQPzWF5Hh4lCvdzzGyFx4c1lP9tS1+2Asj5EXo/oFeBQeov1x+usjNTmlOe6wcjqTi54VwxSRhImBcLOLi83H5Cs1jdvp0ThqVvSlPkoQLz6tjT8oQq2UZw4+6L8W+t/firUbXXwhYcOi+irqRSKxZbsD6cn1S11aLGdljEEJDkZQj+Yx37mu/7ttdNOmH3xqP2PppG+Qi8BzgTM1CclJxWu+pcj3EJlGrMRDeZ4zMpN8Tya0/xQrAdlJUuEq34+zsJyEYZYSR12bDcwHbDDkEx0dMH6ARU/SCKRPLtLAN+bWH90ZrZpq2Q/CzhtBX2fYCUUKid/PWuanMYmUSYhmKrbuPN0QfSyjICTiSvL6p96tHqNwbvM2NJ9PhQV3PYllyOWFFskdXVx+m5dIVuTKOfdEoBXQnBGWg+W6I65OLgMDDOkOKx58MBVxE0SdW/PPKN6lChwMas4m3v8Q0dfZquIyaDnZ8S6ID8xlgM2CifykYDed7AvzGOr71jUmQBgKMtY9B70q990UdU9MYuxNdV4Rp/VOTMfjxAqgAGGLKUv9OCar4JqeKARlgQMtdP5Qt9Q6Y7hmBsN/TEt3IuFpggTDPAk8yh49NyGsgUy8=
  - secure: BQM76ooQPYyNn5DEdXWWk1m5TOrCLqpwnfEBxr2ISJTfz34w2lnC9I7Dv6oNE5Nh2/xbKr1TxcvvNxYAo0gWfVGsWdRquaMQLO3JIM7rsXLq7QuSrxBrc3JVFsMI/mtsrATWpN+Kw9iDtjK2RldvIXAMWxY+f6b5VnrNEbswOvwJXz38MBlbOSld1qUkKzKbXJUSh2kxj4xfdw16IPNECGPTlgc82wHqt794RPIKyxpnnngKNRqrvbMBxmL75azkRLfAbG4JUzTYINJ6JpfAUHXgbhJa48t5HzCUqHu2XVzMwNk523eAgknpXH+g1P68/nbx6NtdZFqjkFcCuJEdRWCLgbdKeEFoZlqaL9/BZxkLGR0E1QjKPGAaUXGf038muMmWLiwZ4tvozQ2lf+hojUdBR8dcB2KPY2BECVQARG8+MCgepHlbgnRVj6THbiXmmEOOtDbq5krHXtAeWpxrQUtp8Tr5nJDDtSz2Mpc9Wj9b+AMNBS/vk44QKrUm6siz2+2b+fFDPXvimD9iXiSDI9Bm8uQBv/mV0PDwndlkBSmO1NhE5CNo17GebD94Si3zadqPrKdULCoC+bRVS4dNy6uDa9j4CHVFv1j5gG69aLN6mApVidgSHTKBfpgdaPeloCJcjtlgbRZoGBCVyRkmLggw+FofnQQNUHfiUS90rD0=
  - secure: GQuqLXUZCenANRcYPqVZ1+u+yGH23tSe8fsTcycBbbv2SdfSA59ay1lJ3h+xFGixDXQqsyLY+ChSwiCzFQSlgYUKdgfUaRNs9mEAoRxTinSWwAMP+ONAZVh39HIIJuE2sxZ1y/1tfx2+4cAmedAImQ68yTv0ddAZeLhk83lmN6LIXtF6VBYJw3GI6HLOOh58oj0FbdmsQRWyoxLU9fj2SbtcKv3f5RZUwOHtb+xKY36wcslb6Ev6vTnt5FrjRkhIvQ1CxSrNzhJXBtnVO22nMcaoULQYaSTWUBgMSgMoBI27osydR3PjUZtknMOQpOBK2dPvJDjkjIB3CyfBDXFX82fDjpNcb7y/WeQs4lnIM/qYv6XCz1gFVT/KM79DSoItmeCBNbgwByCWbLfOXk9J1XUEqQwyAG0MWjsXveKnCWZqpn1IAGksBQ2WFcojQ3DH6lCjzJgam6tuctYL3Wr8YWAnosgRTcUbPBwAW4jSj9x1vQ81/V2za4Nr0HpTHkOnSJqdrBWciVPI6B2Dnv82GPreltRRwic6yUYIhl/jMix/x/4lsyJqUIv8pau4elXA4jQc9jF3fB+s0VdY5dGc7GxcqLIFi6SD0aC3u8jzL7Yqk29IhYeiN6eZXLMLVm/Q7ND1IMK6zysaAQ158KHudGd8wbUtLbIm8y8A8Fu2IKI=
  - secure: btUj39ACZrqiRf0HOND4dMhYZEGEr/DukVkOQRUKsLKwOyh38pbN5HFOCatHKa4RLavzE+C4RQuzDWfqOheedPXc5GTXf68pyG0lnHC+Jgkpva/zf6AJuMMU4AUHhj1itInDO3jiS4rGItAyTZItv/HJloZpXVCBOP092OOHlaBqa/Iqis+VO4n9/winqqdn40gREDEFs27DsC99Na3dRiWi4OqzKmI2DtAGtLLmnzCtaXaq8/lmowDrFlLxfQWIZ4hY5siMvSr03664fNtkKMk4YF0Bc7aU4gO9eN/MQjuiBCi2EhkeVLyB7iRWlWhEclsFlKjfan/pVEHAaq/hXCJSTwLm8WhyrNSjGKrXeP38ozcYWCxGWikpKb9UrUs9Q2xzhK5xYIX5rgSZ+3ihdrjgkpogEIi5vo86D16hdYpd4vtz9l2ZI3f8ybj5cPklWoRouFvCFCVMRRF5AnZk75Unz7gVeRXkAUA4MgSPRmcMpPrG0xh72tSAN8YsRX61Nnyd2B/SgCYJujFpzx9+CXLsuJasUUmBX+UfZNRmKsz5focTIQOU8u6o0ZUWj2KdldcqBVeuUietRP3eaKr4FmMr2tlkt9aSZHitmxj5oPr7XSTrNXupDN9u2sSCRVbswUdDdGtlqthiior3KF+/YE4Rs0dXedkZ3epMplgS7Rg=
  - secure: GT/wF2/5kZalNmpPMTnF+pwcc5Bk6rZP1xdSyj3DO3EPZpWHTOHH2nywpfrO7kdzBopufl7G0XKMA3DdgT9le6sgAcgFPF9v2XjAoAbkA0YIj3fFubGgWtbVgHmHvfMXJnIurYg3OS+PzBXJxPP1y6yof/Ujdd+gQCQ5iMMqca4u+MI5BZNkNystpLZXdO8jWDLj7ouNvYfx9Vhr6e91BnTCiFf+L24xkK+QXHwtbuTVYa3rtQJyz+3HYqAnWEqlbnvIBFSn6MTEPqa8bIVsQ1JCuIZISUjyAgeVLyEm4TznzXyZSe1WAck2Av++DLuB+vPkS3844TnIOxPqHBLclbZ0V+fR78oopWVnvCfsc6yj6E318qcjJp0kmg1TLKn02rF0jD6EWoJr+dMECpvOLVMUALyHRILuR6mfRg6b2OZaWcDXe8lJa2rWAZp309Pe1B6Qslak5Iy3CC8mB4WcZSHYuwZZV9JPtjpRMMJtIVPN1rPDCdxM4DvWX29Dju7WLN0JHDDKqAmbRZovOCP/2PAA2B4aNrWrBNAserwjyn++xKqr6vSKUY3JTVJ/g6abe8wQO4a/PiIYGlEVULD9BnNEUaNK+7Cw67FOZkCymfPdXTnTiL1TKFIWlPFyuOnztstgCk60E9dSjaEKD7hqh0YNccm1fhyg957eScDZI80=
  - secure: AkMAF0tPu8ZH858nTEk7wduJ/ICmziX3U0ti+RP38TgyiPu/warHLB0fbk0O4ek66DBSrpmqR82Cev2gu2Xdngy/Nr9DCDwI+3wM8wmTSeW2YRVnR17ijCwfupF5o096t+GVsd7+Om/fNNZaryUSk/pG8Y0tXx5/g2AC35GuyPygAdQGQSUipoWfLc+A4ghVW2gIGNXKvsl+9tZlch+StsB/pkAKxhq7WdE4wg5PmxvkKB4p56R0iv+ydPj5rPgCbMKo40yNnJvwis8bTnZO/fttyMu1EYoKKkqchMRjBnjhXkfaZ9powWwtaUHwT3rQlI8QTPDahwYgacSMhhKHUAQvepgMRHutljFGKqApxy1IW4un+3/H2YRXPxHbcSWkJotW+akig0Lj0EWTE5O5zUDaHUe7ffwO/fYQ0JRcHrPwTyrYAySf5LWI/BZj9DX7OyIPGpESBs1IKU0RiKr5iAXDo72Q9WYaSUREtsMh7UeLAeew/0WEqpEa+Q6HOuGr/KRBua8ajllLI+tEgrYTzEVohvJBHJ2uuu0/mv2OMKKFTB6Dcbky1bRQUjIaKhtMuyGgth71Ke6Q5OoJxK5BiRnzhF7ee6SjxZsdfgFMcYG1mGxBhS+5GIs2jTswW9VEEZxkthWHu4tGFRvoe14QdckLwUZhZOJogMs6bSRHCf0=
  - secure: K+fAAzCimsT/mCa7kYyiyNTYa1V5h20ZSQ5pig78ZnIkRJ0QZHLoDH5AFOcR36tTXY/Qy3tSHMnaWFS9QQAQHIH54M64ekg/xhtsyivNVvZGHj2maCltjok+0ttBS2LUvuFknhBGEb05p3i0bOE/bYP415tDvyx3PP1SkiZZV8b5zvnhUI/j+9OKcc3q4Sq5VaAZ7QLv/9XF8WSlSOMlY2BxpYweZOsjBD6o4J/w+Eew7XW/wvK1d/sPMIF5Jj5DGNaJ68OZ3Ak5edMjC0mv6DN3CFxUoNCVKkkgsNNVQrvmvi0J88Hsr7rAgZiSJDNnLJtdTxo1M606L2gsQNpRUQBej8B0OIrNQcd5a7Y5Bw2TTB5IrLLWTzfz1aQYGFqrX7nTJE5VfzMVv5xR5WIdpeW8bKyLhSi3smeflGBRBr9YhwMsvvo7oe7uxaqNJrc90W9Z5sQ7i4VOU4ynffi+l4sTEgcCALo8EZiHmwAOoLRcnHJ4uC3F6dTAJy3cSPJl7/kmTMS51hhphuErrqElJlPp/BfNrPTx7FfCDM5mL0oDeFzZD5FYd/O818I4RgMmV/YOeKMafWUSb535copPhwF6L5gQ/cBM1F83OnXRuuoovb4kdKaKt7oDqRITI7LEtSHe3gzlT5ixXj2z9VDf0+DO5IoFkRE6OztaTe/BwfA=
before_install:
- openssl aes-256-cbc -K $encrypted_599be5172508_key -iv $encrypted_599be5172508_iv
  -in id_rsa_travis.enc -out id_rsa -d
- mv id_rsa ~/.ssh/id_rsa
- chmod 400 ~/.ssh/id_rsa
